apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
- ./ui/
- ./catalog/
- ./checkout/
- ./orders/
- ./carts/
- pdb-patch.yaml


patches:
- path: graviton-patch.yaml
  target:
    kind: Deployment
    labelSelector: "app.kubernetes.io/name!=carts"
- path: otel-annotations-patch.yaml
  target:
    kind: Deployment
    labelSelector: "app.kubernetes.io/name!=carts"
- path: topology-spread-patch.yaml
  target:
    kind: Deployment
- path: hpa-patch.yaml
  target:
    kind: HorizontalPodAutoscaler
    labelSelector: "app.kubernetes.io/name in (ui,catalog,checkout,carts,orders)"